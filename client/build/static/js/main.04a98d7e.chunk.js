(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{110:function(e,t,c){},111:function(e,t,c){},121:function(e,t,c){},140:function(e,t,c){},142:function(e,t,c){},144:function(e,t,c){},145:function(e,t,c){},147:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(30),r=c.n(s),o=(c(110),c(10)),i=c(59),l=c(19),j=c(35),b=(c(111),c(1)),u=function(e){var t=e.isAuth,c=e.setIsAuth,a=e.setUserId,s=e.setRole,r=e.role,o=Object(l.g)();Object(n.useEffect)((function(){var e=localStorage.getItem("token");if(null===e)o.push("/login");else{var t=Object(i.a)(e);a(t.id),s(t.role),c(!0)}}));return Object(b.jsx)("header",{className:"header",style:{margin:"0px"},children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("div",{className:"header-right",children:[Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/",children:"home"})}),"admin"===r&&Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/uploads",children:"uploads "})}),Object(b.jsx)("li",{children:Object(b.jsx)(j.b,{to:"/books",children:"Books"})})]})]}),t?Object(b.jsx)("li",{style:{float:"right",height:""},children:Object(b.jsx)("button",{className:"buttonForm",onClick:function(){localStorage.removeItem("token"),c(!1),a(""),s(""),o.push("/login")},children:"Logout"})}):Object(b.jsx)("li",{style:{float:"right"},children:Object(b.jsx)(j.b,{to:"/login",children:Object(b.jsx)("button",{className:"buttonForm",children:"Login"})})})]})})};c(121);var d=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("h1",{className:"welcome",children:"WELCOME to the library "})})},h=c(34),O=c.n(h);c(140);var m=function(e){var t=e.setRole,c=e.setUserId,a=e.setIsAuth,s=Object(l.g)(),r=Object(n.useState)(""),i=Object(o.a)(r,2),j=i[0],u=i[1],d=Object(n.useState)(""),h=Object(o.a)(d,2),m=h[0],x=h[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),g=p[0],v=p[1],y=Object(n.useState)(""),k=Object(o.a)(y,2),C=k[0],N=k[1];return Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"register-container",children:Object(b.jsxs)("form",{className:"form-login",onSubmit:function(e){if(e.preventDefault(),""===j||""===m)return v(!0),N("All fields are required"),void setTimeout((function(){v(!1)}),1500);var n={username:j,password:m};O.a.post("http://localhost:5000/auth/login",n).then((function(e){t(e.data.role),c(e.data.userId),localStorage.setItem("token",e.data.token),a(!0),s.push("/")})).catch((function(e){var t=e.response;v(!0),N("".concat(t.data.message))}))},children:[Object(b.jsx)("div",{class:"imgcontainer",children:Object(b.jsx)("img",{src:"/images/avatar.png",alt:"Avatar",class:"avatar"})}),Object(b.jsxs)("div",{className:"register-form-control",children:[Object(b.jsx)("label",{id:"FormItem",htmlFor:"username",children:"username"}),Object(b.jsx)("input",{type:"text",id:"username",value:j,onChange:function(e){return u(e.target.value)}})]}),Object(b.jsxs)("div",{className:"register-form-control",children:[Object(b.jsx)("label",{className:"labell",htmlFor:"password",children:"Password"}),Object(b.jsx)("input",{type:"password",id:"password",value:m,onChange:function(e){return x(e.target.value)}})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{className:"buttonForm",type:"submit",children:"Login"})}),g&&Object(b.jsx)("small",{style:{color:"#ff6961"},children:C})]})})})})},x=c(31),f=c.n(x),p=c(22),g=c(41),v=c(8),y=(c(221),c(210),c(200),c(201),c(222),c(197));Object(y.a)({navBar:{backgroundColor:"#203040","& a":{color:"#ffffff",marginLeft:10}},main:{minHeight:"80vh"},footer:{textAlign:"center",backgroundColor:"#203040",color:"#ffffff",fontSize:"1.6rem",marginBottom:0},brand:{fontSize:"1.6rem"},grow:{flexGrow:1},image:{maxHeight:200},card:{maxWidth:300,maxHeight:400,margin:"auto",backgroundColor:"#DCDCDC",color:"#fffff"}});c(202);c(142);var k=c(214),C=c(216),N=c(220),S=c(219),I=c(215),w=c(217),F=c(208),L=c(218),P=[{id:"title",label:"Name",minWidth:170},{id:"publisher",label:"PublisherNamer",minWidth:100},{id:"isbn",label:"isbn",minWidth:170,align:"right"},{id:"category",label:"category",minWidth:170,align:"right"}];function A(e){var t=e.books,c=Object(n.useState)(0),a=Object(o.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(10),l=Object(o.a)(i,2),u=l[0],d=l[1];return Object(b.jsxs)(k.a,{sx:{width:"70%",margin:"25px auto"},children:[Object(b.jsx)(I.a,{sx:{maxHeight:440},children:Object(b.jsxs)(C.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(b.jsx)(w.a,{children:Object(b.jsx)(L.a,{children:P.map((function(e){return Object(b.jsx)(S.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(b.jsx)(N.a,{children:t.slice(s*u,s*u+u).map((function(e){return Object(b.jsx)(L.a,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map((function(t){var c=e[t.id];return Object(b.jsx)(S.a,{align:t.align,children:t.format&&"number"===typeof c?t.format(c):Object(b.jsxs)(j.b,{to:"/books/".concat(e.id),children:[c," "]})},t.id)}))},e.code)}))})]})}),Object(b.jsx)(F.a,{rowsPerPageOptions:[10,25,100],component:"div",count:t.length,rowsPerPage:u,page:s,onPageChange:function(e,t){r(t)},onRowsPerPageChange:function(e){d(+e.target.value),r(0)}})]})}var B=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)("title"),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(""),u=Object(o.a)(j,2),d=u[0],h=u[1],m=Object(n.useState)("title"),x=Object(o.a)(m,2),v=x[0],y=x[1];Object(n.useEffect)((function(){function e(){return(e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.a.get("http://localhost:5000/book/getAllBooks").then((function(e){var t=e.data;console.log(t),a((function(e){return e.concat.apply(e,Object(p.a)(t))}))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("fetched"),function(){e.apply(this,arguments)}()}),[]),c.sort((function(e,t){return e[i].toUpperCase()<t[i].toUpperCase()?-1:1}));var k=c.filter((function(e){return""===d||e[v].toLowerCase().includes(d.toLowerCase())?e:void 0}));return Object(b.jsx)("div",{style:{top:"50pxs"},children:c.length>0?Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)("ul",{style:{backgroundColor:"none"},children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{style:{color:"aliceblue"},children:"sort by :"}),Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"radio-btn",onClick:function(e){l("publisher")},children:"publisher"})}),Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"radio-btn",onClick:function(e){l("title")},children:"title"})})]})}),Object(b.jsxs)("div",{className:"searchCriteria",children:[Object(b.jsx)("div",{className:"searchBar",children:Object(b.jsx)("form",{id:"searchFom",children:Object(b.jsx)("input",{type:"text",placeholder:"Search..",name:"search",className:"searchInput",onChange:function(e){h(e.target.value)}})})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{style:{color:"#f0f8ff"},children:"search filter:"}),Object(b.jsxs)("div",{className:"radio-btn-container",children:[Object(b.jsxs)("div",{className:"radio-btn",onClick:function(){y("title")},children:[Object(b.jsx)("input",{type:"radio",value:"title",name:"option",checked:"title"===v}),"title"]}),Object(b.jsxs)("div",{className:"radio-btn",onClick:function(){y("publisher")},children:[Object(b.jsx)("input",{type:"radio",value:"publisher",name:"option",checked:"publisher"===v}),"publisher"]})]})]})]}),Object(b.jsx)(A,{books:k})]}):Object(b.jsx)("h1",{style:{color:"gray",textAlign:"center"},children:"there is no books in the data base"})})},D=Object(n.createContext)(),E=c(95),R=(c(144),c(93),{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa",color:"#bdbdbd",outline:"none",transition:"border .24s ease-in-out"}),T={borderColor:"#2196f3"},W={borderColor:"#00e676"},G={borderColor:"#ff1744"};function H(){var e=Object(n.useState)(),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(!1),u=Object(o.a)(j,2),d=u[0],h=u[1],m=Object(n.useState)(""),x=Object(o.a)(m,2),p=x[0],y=x[1],k=Object(E.a)({accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),C=k.getRootProps,N=k.getInputProps,S=k.isDragActive,I=k.isDragAccept,w=k.isDragReject,F=k.acceptedFiles,L=Object(n.useMemo)((function(){return Object(v.a)(Object(v.a)(Object(v.a)(Object(v.a)({},R),S?T:{}),I?W:{}),w?G:{})}),[S,w,I]),P=function(){var e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(!0),(t=new FormData).append("file",c),O.a.post("http://localhost:5000/upload/xlsFile",t).then((function(e){console.log(e)})).catch((function(e){h(!0),y("".concat(e.response.data)),setTimeout((function(){h(!1)}),5e3)})),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=F.map((function(e){return Object(b.jsx)("li",{children:e.name})}));return Object(n.useEffect)((function(){a(F[0]),console.log(c)}),[F,c]),Object(b.jsxs)(n.Fragment,{children:[i&&Object(b.jsx)(i,{type:"balls",color:"#4f93ff"}),Object(b.jsxs)("div",{className:"dropzone-container",children:[Object(b.jsxs)("div",{className:"dropzone",children:[Object(b.jsxs)("div",Object(v.a)(Object(v.a)({},C({style:L})),{},{children:[Object(b.jsx)("input",Object(v.a)({},N())),Object(b.jsx)("p",{children:"Drag drop some xls file only, or click to select files"})]})),Object(b.jsxs)("aside",{children:[Object(b.jsx)("h4",{children:"Files"}),Object(b.jsx)("ul",{children:A})]})]}),Object(b.jsx)("button",{type:"button",className:"buttonForm",onClick:P,children:"send"}),d&&Object(b.jsx)("small",{style:{color:"#ff6961"},children:p})]})]})}var U=function(){return Object(b.jsx)(n.Fragment,{children:Object(b.jsx)(H,{})})},V=c(211),z=c(209),M=c(207),J=c(94),q=c(213);c(145);function K(e){var t=e.match,c=e.history,a=Object(n.useState)(),s=Object(o.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)(),j=Object(o.a)(l,2),u=j[0],d=j[1],h=Object(n.useState)(),m=Object(o.a)(h,2),x=m[0],p=m[1],v=Object(n.useState)(),y=Object(o.a)(v,2),k=y[0],C=y[1],N=Object(n.useState)(),S=Object(o.a)(N,2),I=S[0],w=S[1],F=Object(n.useState)(),L=Object(o.a)(F,2),P=(L[0],L[1]),A=Object(n.useState)(!1),B=Object(o.a)(A,2),D=B[0],E=B[1];Object(n.useEffect)((function(){fetch("http://localhost:5000/book/getBookById/".concat(t.params.id)).then((function(e){return e.json()})).then((function(e){return i(e)}))}),[D]);var R=function(){var e=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("hello"),O.a.delete("http://localhost:5000/book/deleteBookById/".concat(r.id)).then(i(null)),c.push("/books");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T={title:u,publisher:x,description:I,isbn:k};return Object(b.jsx)("div",{children:r?Object(b.jsx)(n.Fragment,{children:Object(b.jsx)("div",{className:"bookContainer",children:Object(b.jsxs)(V.a,{style:{width:"50rem",minHeight:"20rem",backgroundColor:"silver",opacity:"0.8",margin:"20px auto",borderRadius:"15px",top:"50px"},children:[Object(b.jsx)("span",{className:"header-title",children:r.title}),Object(b.jsxs)(z.a,{onSubmit:function(e){e.preventDefault(),O.a.patch("http://localhost:5000/book/updateBookById/".concat(r.id),T).then((function(){E(!D),console.log(D)}))},children:[Object(b.jsxs)(z.a.Group,{as:M.a,className:"mb-3",controlId:"formPlaintextEmail",style:{marginLeft:"25px"},children:[Object(b.jsx)(z.a.Label,{className:"inputTitle",column:!0,sm:"3",children:"title :"}),Object(b.jsx)(J.a,{sm:"10",children:Object(b.jsx)(z.a.Control,{plaintext:!0,defaultValue:r.title,onChange:function(e){d(e.target.value)}})})]}),Object(b.jsxs)(z.a.Group,{style:{marginLeft:"25px"},as:M.a,className:"mb-3",controlId:"formPlaintextEmail",children:[Object(b.jsx)(z.a.Label,{className:"inputTitle",column:!0,sm:"3",children:"isbn :"}),Object(b.jsx)(J.a,{sm:"10",children:Object(b.jsx)(z.a.Control,{plaintext:!0,defaultValue:r.isbn,onChange:function(e){C(e.target.value)}})})]}),Object(b.jsxs)(z.a.Group,{style:{marginLeft:"25px"},as:M.a,className:"mb-3",controlId:"formPlaintextEmail",children:[Object(b.jsx)(z.a.Label,{className:"inputTitle",column:!0,sm:"3",children:"description :"}),Object(b.jsx)(J.a,{sm:"10",children:Object(b.jsx)(z.a.Control,{onChange:function(e){w(e.target.value)},plaintext:!0,defaultValue:r.description})})]}),Object(b.jsxs)(z.a.Group,{style:{marginLeft:"25px"},as:M.a,className:"mb-3",controlId:"formPlaintextEmail",children:[Object(b.jsx)(z.a.Label,{className:"inputTitle",column:!0,sm:"3",children:"location :"}),Object(b.jsx)(J.a,{sm:"10",children:Object(b.jsx)(z.a.Control,{onChange:function(e){P(e.target.value)},plaintext:!0,defaultValue:r.publisher})})]}),Object(b.jsxs)(z.a.Group,{style:{marginLeft:"25px"},as:M.a,className:"mb-3",controlId:"formPlaintextEmail",children:[Object(b.jsx)(z.a.Label,{className:"inputTitle",column:!0,sm:"3",children:"location :"}),Object(b.jsx)(J.a,{sm:"10",children:Object(b.jsx)(z.a.Control,{onChange:function(e){p(e.target.value)},plaintext:!0,defaultValue:r.publisher})})]}),Object(b.jsxs)("div",{style:{margin:"10px 250px",justifyContent:"space-around",flexDirection:"row"},children:[Object(b.jsx)(q.a,{variant:"success",type:"submit",children:"save"}),Object(b.jsx)(q.a,{style:{marginLeft:"10px ",backgroundColor:"red"},onClick:R,children:"delete"})]})]})]})})}):Object(b.jsx)("h1",{children:" no Book to show "})})}c(146);var Q=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),r=Object(o.a)(s,2),h=(r[0],r[1]),O=Object(n.useState)(!1),x=Object(o.a)(O,2),f=x[0],p=x[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");if(!e)return Object(b.jsx)(l.a,{to:"/login"});var t=Object(i.a)(e);p(!0),h(t.id),a(t.role)})),Object(b.jsx)(n.Fragment,{children:Object(b.jsx)(D.Provider,{value:{role:c,setRole:a,isAuth:f,setIsAuth:p},children:Object(b.jsxs)(j.a,{children:[Object(b.jsx)(u,{isAuth:f,setIsAuth:p,setUserId:h,setRole:a,role:c}),Object(b.jsx)("main",{children:Object(b.jsxs)(l.d,{children:[Object(b.jsx)(l.b,{path:"/",exact:!0,component:d}),Object(b.jsx)(l.b,{path:"/login",children:Object(b.jsx)(m,{setRole:a,setUserId:h,setIsAuth:p})}),Object(b.jsx)(l.b,{path:"/uploads",component:U}),Object(b.jsx)(l.b,{path:"/books",exact:!0,children:Object(b.jsx)(B,{})}),Object(b.jsx)(l.b,{path:"/books/:id",component:K})]})})]})})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,225)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root")),X()}},[[147,1,2]]]);
//# sourceMappingURL=main.04a98d7e.chunk.js.map